# TCP原理
## TCP套接字中的I/O缓冲
- I/O缓冲在每个TCP套接字中单独存在
- I/O缓冲在创建套接字时自动生成
- 即使关闭套接字仍然会传输遗留在输出缓冲区中的数据
- 关闭套接字会丢失输入缓冲区中的数据
- ![tcp缓冲](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1550906082822&di=834dd47fb0f682f3cbc697f0a5fdf584&imgtype=0&src=http%3A%2F%2Fseo-1255598498.file.myqcloud.com%2Ffull%2Fea521c12d6460d92fa11c05d0c26b35677e61dc8.jpg)

## TCP内部工作原理1：与对方套接字建立连接
**三次握手**
![TCP三次握手](https://images2017.cnblogs.com/blog/985821/201708/985821-20170802101806802-1497343688.png)
- 客户端发出syn=1，请求同步；并且发出序列seq=X，假设X=1000，以及空的ACK信号
- 服务器收到，同时发出同步信号syn=1；并确认，发出ACK = 1信号