# 计算机网络和因特网
### 1.1
- **主机和端系统**：
所有与互联网连接的设备
- **ISP**：
因特网服务提供商
- **协议**：
定义了在两个或者多个通信实体之间交换的报文格式和顺序，以及报文接收或发送或其他事件所采取的动作。
### 1.2
- **分组**：
> 1. 为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块。
> 2. 每个分组都通过通信链路和分组交换机传送（交换机主要分为两类：路由器和链路层交换机）
- **排队时延和分组丢失**：
> 1. 每台分组交换机有多条链路与之相连。对于每一条链路，该分组交换机具有一个**输出缓存**（也成为输出队列）。
> 2. 时延分为存储转发时延和输出缓存的排队时延
> 3. 一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了，在此情况下，将出现**分组丢失（丢包）**，到达的分组或已经排队的分组之一将被丢弃。

- 在每个端系统中具有一个称为IP地址的地址，每台路由器具有一个**转发表**，用于将目的地址映射为输出链路。因特网具有一些特殊的路由选择协议，用于自动的设置这些转发表。
>例如：一个路由选择协议可以决定从每台路由器到每个目的地的最短路径，并使用这些最短路径结果来配置路由器中的转发表。
### 1.3
- **时延类型**
> 1. 处理时延：检查分组首部和决定该分组导向何处所需要的时间（最重要的时延）
> 2. 排队时延：分组在链路上等待传输时，位于队列中
> 3. 传输时延：当路由器传送分组时，分组头部和尾部走出路由器的时间
> 4. 传播时延：两个路由器之间，分组的传递时间
- **吞吐量**
> 例如：从一个P2P文件共享系统中的一个对等方向另一个对等方传送一个大视频片段。在任何时间瞬间的瞬时吞吐量是主机B接受到该文件的速率（以bps计算）。
- **协议分层**
1. 应用层：主要包含HTTP、SMTP、FTP协议，位于该层的信息分组称为报文
2. 运输层：在应用程序端点之间传送应用层报文，主要包括TCP和UDP协议，位于该层的信息分组成为报文段
3. 网络层：将数据报的网络层分组从一台主机移动到另一台主机，网络层包含了著名的网际协议IP。
4. 链路层：为了将分组从一个节点移动到另一个节点，网络层必须要靠该链路层的服务，链路层的分组称为帧。
5. 物理层：以一个个比特传输数据。
# 应用层
#### 应用层主流体系结构：客户-服务器体系结构和对等（P2P）结构。
> p2p主要包括文件共享、对等方协助下载加速器（迅雷）、因特网电话和视频会议（Skype）。不需要中间服务器的代理，p2p最引人入胜的是他们的自扩展性。但也面临安全的挑战。
#### HTTP概况
> 1、web的应用层协议是超文本传输协议（http），http由两个程序实现，一个客户端程序，一个服务端程序。
2、Http定义了Web客户向Web服务器请求Web页面的方式，以及服务器向客户传送Web页面的方式
3、Http使用TCP作为它的支撑运输协议（而不是在UDP上运行）。
4、**无状态协议**：服务器向客户发送被请求的文件，而储存任何关于该客户的状态信息。
#### 持续连接和非持续连接
>持续连接：每个请求/响应对是经一个单独的TCP连接发送
非持续连接：所有连接/响应对是经过相同的TCP连接发送

- 持续连接：
每个TCP连接在服务器发送一个对象后关闭，即该连接并不为其他的对象而持续下来。值得注意的是每个TCP连接只传输一个请求报文和一个响应报文。如果用户请求web界面时，如果含有一个html基本文件和10个jpg图像，那么tcp将连接11次。
- 非持续连接：
TCP连接能够为其他的对象而持续下来。一般来说，如果一条连接经过一定时间间隔仍未被使用，HTTP服务器就关闭该连接。
缺点：
1、 维护一个连接给Web服务器带来了严重的负担
2、 经受两倍RTT的交付时延（和持续连接一样）

#### HTTP报文格式
1. HTTP请求报文
示例：
```
GET /somedir/page.html HTTP/1.1 
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```
`GET`


